C_Code: 
bool MessageParcel::WriteRemoteObject(const sptr<IRemoteObject> &object)
{
    if (object == nullptr) {
        return false;
    }
    // Increase object's refcount temporarily in case of premature deallocation,
    // object's refcount will be decreased when this MessageParcel destroyed.
    if (object->AttemptIncStrongRef(this) != true) {
        return false;
    }
    holders_.push_back(object);
    object->DecStrongRef(this);
#ifndef CONFIG_IPC_SINGLE
    if (object->IsProxyObject()) {
        const IPCObjectProxy *proxy = reinterpret_cast<const IPCObjectProxy *>(object.GetRefPtr());
        const uint32_t handle = proxy ? proxy->GetHandle() : 0;
        if (IPCProcessSkeleton::IsHandleMadeByUser(handle)) {
            /* this is a fake proxy which handle get by MakeRemoteHandle(), Not binder driver of kernel */
            ZLOGI(LOG_LABEL, "send a dbinder proxy to another process in this device");
            return WriteDBinderProxy(object, handle, 0);
        }
    }
#endif

#ifndef CONFIG_IPC_SINGLE
    auto offset = GetWritePosition();
#endif
    if (!WriteObject<IRemoteObject>(object)) {
        return false;
    }
#ifndef CONFIG_IPC_SINGLE
    if (!UpdateDBinderDataOffset(offset)) {
        RewindWrite(offset);
        return false;
    }
#endif
    return true;
}
Function: 
pub(crate) fn write_process<T>(
        &mut self,
        value: T,
        f: fn(parcel: Pin<&mut MessageParcel>, value: T) -> bool,
    ) -> IpcResult<()> {
        match mem::replace(&mut self.inner, ParcelMem::Null) {
            ParcelMem::Unique(mut p) => {
                let res = f(p.pin_mut(), value);
                self.inner = ParcelMem::Unique(p);
                match res {
                    true => Ok(()),
                    false => Err(IpcStatusCode::Failed),
                }
            }
            ParcelMem::Borrow(p) => {
                let w = unsafe { Pin::new_unchecked(&mut *p) };
                let res = f(w, value);
                self.inner = ParcelMem::Borrow(p);
                match res {
                    true => Ok(()),
                    false => Err(IpcStatusCode::Failed),
                }
            }
            ParcelMem::Null => IpcResult::Err(IpcStatusCode::Failed),
        }
    }
Unixcoder Score: -0.0035906934645026922
--------------------------------------------------
C_Code: 
bool MessageParcel::WriteRemoteObject(const sptr<IRemoteObject> &object)
{
    if (object == nullptr) {
        return false;
    }
    // Increase object's refcount temporarily in case of premature deallocation,
    // object's refcount will be decreased when this MessageParcel destroyed.
    if (object->AttemptIncStrongRef(this) != true) {
        return false;
    }
    holders_.push_back(object);
    object->DecStrongRef(this);
#ifndef CONFIG_IPC_SINGLE
    if (object->IsProxyObject()) {
        const IPCObjectProxy *proxy = reinterpret_cast<const IPCObjectProxy *>(object.GetRefPtr());
        const uint32_t handle = proxy ? proxy->GetHandle() : 0;
        if (IPCProcessSkeleton::IsHandleMadeByUser(handle)) {
            /* this is a fake proxy which handle get by MakeRemoteHandle(), Not binder driver of kernel */
            ZLOGI(LOG_LABEL, "send a dbinder proxy to another process in this device");
            return WriteDBinderProxy(object, handle, 0);
        }
    }
#endif

#ifndef CONFIG_IPC_SINGLE
    auto offset = GetWritePosition();
#endif
    if (!WriteObject<IRemoteObject>(object)) {
        return false;
    }
#ifndef CONFIG_IPC_SINGLE
    if (!UpdateDBinderDataOffset(offset)) {
        RewindWrite(offset);
        return false;
    }
#endif
    return true;
}
Function: 
pub fn write<T: Serialize + ?Sized>(&mut self, value: &T) -> IpcResult<()> {
        value.serialize(self)
    }
Unixcoder Score: -0.00454773148521781
--------------------------------------------------
C_Code: 
bool MessageParcel::WriteRemoteObject(const sptr<IRemoteObject> &object)
{
    if (object == nullptr) {
        return false;
    }
    // Increase object's refcount temporarily in case of premature deallocation,
    // object's refcount will be decreased when this MessageParcel destroyed.
    if (object->AttemptIncStrongRef(this) != true) {
        return false;
    }
    holders_.push_back(object);
    object->DecStrongRef(this);
#ifndef CONFIG_IPC_SINGLE
    if (object->IsProxyObject()) {
        const IPCObjectProxy *proxy = reinterpret_cast<const IPCObjectProxy *>(object.GetRefPtr());
        const uint32_t handle = proxy ? proxy->GetHandle() : 0;
        if (IPCProcessSkeleton::IsHandleMadeByUser(handle)) {
            /* this is a fake proxy which handle get by MakeRemoteHandle(), Not binder driver of kernel */
            ZLOGI(LOG_LABEL, "send a dbinder proxy to another process in this device");
            return WriteDBinderProxy(object, handle, 0);
        }
    }
#endif

#ifndef CONFIG_IPC_SINGLE
    auto offset = GetWritePosition();
#endif
    if (!WriteObject<IRemoteObject>(object)) {
        return false;
    }
#ifndef CONFIG_IPC_SINGLE
    if (!UpdateDBinderDataOffset(offset)) {
        RewindWrite(offset);
        return false;
    }
#endif
    return true;
}
Function: 
pub(crate) fn write_process<T>(
        &mut self,
        value: T,
        f: fn(parcel: Pin<&mut MessageParcel>, value: T) -> bool,
    ) -> IpcResult<()> {
        match mem::replace(&mut self.inner, ParcelMem::Null) {
            ParcelMem::Unique(mut p) => {
                let res = f(p.pin_mut(), value);
                self.inner = ParcelMem::Unique(p);
                match res {
                    true => Ok(()),
                    false => Err(IpcStatusCode::Failed),
                }
            }
            ParcelMem::Borrow(p) => {
                let w = unsafe { Pin::new_unchecked(&mut *p) };
                let res = f(w, value);
                self.inner = ParcelMem::Borrow(p);
                match res {
                    true => Ok(()),
                    false => Err(IpcStatusCode::Failed),
                }
            }
            ParcelMem::Null => IpcResult::Err(IpcStatusCode::Failed),
        }
    }
Unixcoder Score: -0.007724646478891373
--------------------------------------------------
C_Code: 
PhysicalDevicePipelineBinaryPropertiesKHR( VkPhysicalDevicePipelineBinaryPropertiesKHR const & rhs ) VULKAN_HPP_NOEXCEPT
      : PhysicalDevicePipelineBinaryPropertiesKHR( *reinterpret_cast<PhysicalDevicePipelineBinaryPropertiesKHR const *>( &rhs ) )
    {
    }
Function: 
fn from(src: &vello_encoding::WorkgroupCounts) -> Self {
        Self {
            use_large_path_scan: src.use_large_path_scan,
            path_reduce: (&src.path_reduce).into(),
            path_reduce2: (&src.path_reduce2).into(),
            path_scan1: (&src.path_scan1).into(),
            path_scan: (&src.path_scan).into(),
            bbox_clear: (&src.bbox_clear).into(),
            flatten: (&src.flatten).into(),
            draw_reduce: (&src.draw_reduce).into(),
            draw_leaf: (&src.draw_leaf).into(),
            clip_reduce: (&src.clip_reduce).into(),
            clip_leaf: (&src.clip_leaf).into(),
            binning: (&src.binning).into(),
            tile_alloc: (&src.tile_alloc).into(),
            path_count_setup: (&src.path_count_setup).into(),
            backdrop: (&src.backdrop).into(),
            coarse: (&src.coarse).into(),
            path_tiling_setup: (&src.path_tiling_setup).into(),
            fine: (&src.fine).into(),
        }
    }
Unixcoder Score: -0.00976119376718998
--------------------------------------------------
C_Code: 
void MockLoadCallback::OnLoadSACompleteForRemote(const std::string& deviceId, int32_t systemAbilityId,
        const sptr<IRemoteObject>& remoteObject)
    {
        cout << "OnLoadSACompleteForRemote systemAbilityId:" << systemAbilityId <<  "ret : "<<
            ((remoteObject != nullptr) ? "succeed" : "failed") << endl;
    }
Function: 
pub fn get_system_ability(said: i32) -> Option<RemoteObj> {
        info!("get system ability {}", said);
        RemoteObj::from_sptr(GetSystemAbility(said))
    }
Unixcoder Score: -0.01028332021087408
--------------------------------------------------
C_Code: 
struct VkSubresourceLayout {
    VkDeviceSize    offset;
    VkDeviceSize    size;
    VkDeviceSize    rowPitch;
    VkDeviceSize    arrayPitch;
    VkDeviceSize    depthPitch;
}
Function: 
struct BufferSizes {
        // Known size buffers
        path_reduced: u32,
        path_reduced2: u32,
        path_reduced_scan: u32,
        path_monoids: u32,
        path_bboxes: u32,
        draw_reduced: u32,
        draw_monoids: u32,
        info: u32,
        clip_inps: u32,
        clip_els: u32,
        clip_bics: u32,
        clip_bboxes: u32,
        draw_bboxes: u32,
        bump_alloc: u32,
        indirect_count: u32,
        bin_headers: u32,
        paths: u32,
        // Bump allocated buffers
        lines: u32,
        bin_data: u32,
        tiles: u32,
        seg_counts: u32,
        segments: u32,
        ptcl: u32,
    }
Unixcoder Score: -0.015473416075110435
--------------------------------------------------
C_Code: 
bool MessageParcel::WriteRemoteObject(const sptr<IRemoteObject> &object)
{
    if (object == nullptr) {
        return false;
    }
    // Increase object's refcount temporarily in case of premature deallocation,
    // object's refcount will be decreased when this MessageParcel destroyed.
    if (object->AttemptIncStrongRef(this) != true) {
        return false;
    }
    holders_.push_back(object);
    object->DecStrongRef(this);
#ifndef CONFIG_IPC_SINGLE
    if (object->IsProxyObject()) {
        const IPCObjectProxy *proxy = reinterpret_cast<const IPCObjectProxy *>(object.GetRefPtr());
        const uint32_t handle = proxy ? proxy->GetHandle() : 0;
        if (IPCProcessSkeleton::IsHandleMadeByUser(handle)) {
            /* this is a fake proxy which handle get by MakeRemoteHandle(), Not binder driver of kernel */
            ZLOGI(LOG_LABEL, "send a dbinder proxy to another process in this device");
            return WriteDBinderProxy(object, handle, 0);
        }
    }
#endif

#ifndef CONFIG_IPC_SINGLE
    auto offset = GetWritePosition();
#endif
    if (!WriteObject<IRemoteObject>(object)) {
        return false;
    }
#ifndef CONFIG_IPC_SINGLE
    if (!UpdateDBinderDataOffset(offset)) {
        RewindWrite(offset);
        return false;
    }
#endif
    return true;
}
Function: 
pub fn write_remote(&mut self, remote: RemoteObj) -> IpcResult<()> {
        self.write_process(remote.inner, WriteRemoteObject)
    }
Unixcoder Score: -0.015974905341863632
--------------------------------------------------
C_Code: 
bool MessageParcel::WriteRemoteObject(const sptr<IRemoteObject> &object)
{
    if (object == nullptr) {
        return false;
    }
    // Increase object's refcount temporarily in case of premature deallocation,
    // object's refcount will be decreased when this MessageParcel destroyed.
    if (object->AttemptIncStrongRef(this) != true) {
        return false;
    }
    holders_.push_back(object);
    object->DecStrongRef(this);
#ifndef CONFIG_IPC_SINGLE
    if (object->IsProxyObject()) {
        const IPCObjectProxy *proxy = reinterpret_cast<const IPCObjectProxy *>(object.GetRefPtr());
        const uint32_t handle = proxy ? proxy->GetHandle() : 0;
        if (IPCProcessSkeleton::IsHandleMadeByUser(handle)) {
            /* this is a fake proxy which handle get by MakeRemoteHandle(), Not binder driver of kernel */
            ZLOGI(LOG_LABEL, "send a dbinder proxy to another process in this device");
            return WriteDBinderProxy(object, handle, 0);
        }
    }
#endif

#ifndef CONFIG_IPC_SINGLE
    auto offset = GetWritePosition();
#endif
    if (!WriteObject<IRemoteObject>(object)) {
        return false;
    }
#ifndef CONFIG_IPC_SINGLE
    if (!UpdateDBinderDataOffset(offset)) {
        RewindWrite(offset);
        return false;
    }
#endif
    return true;
}
Function: 
pub fn write_remote(&mut self, remote: RemoteObj) -> IpcResult<()> {
        self.write_process(remote.inner, WriteRemoteObject)
    }
Unixcoder Score: -0.016285499557852745
--------------------------------------------------
C_Code: 
PhysicalDeviceClusterCullingShaderPropertiesHUAWEI( VkPhysicalDeviceClusterCullingShaderPropertiesHUAWEI const & rhs ) VULKAN_HPP_NOEXCEPT
      : PhysicalDeviceClusterCullingShaderPropertiesHUAWEI( *reinterpret_cast<PhysicalDeviceClusterCullingShaderPropertiesHUAWEI const *>( &rhs ) )
    {
    }
Function: 
fn from(src: &vello_encoding::BufferSizes) -> Self {
        Self {
            path_reduced: src.path_reduced.size_in_bytes(),
            path_reduced2: src.path_reduced2.size_in_bytes(),
            path_reduced_scan: src.path_reduced_scan.size_in_bytes(),
            path_monoids: src.path_monoids.size_in_bytes(),
            path_bboxes: src.path_bboxes.size_in_bytes(),
            draw_reduced: src.draw_reduced.size_in_bytes(),
            draw_monoids: src.draw_monoids.size_in_bytes(),
            info: src.info.size_in_bytes(),
            clip_inps: src.clip_inps.size_in_bytes(),
            clip_els: src.clip_els.size_in_bytes(),
            clip_bics: src.clip_bics.size_in_bytes(),
            clip_bboxes: src.clip_bboxes.size_in_bytes(),
            draw_bboxes: src.draw_bboxes.size_in_bytes(),
            bump_alloc: src.bump_alloc.size_in_bytes(),
            indirect_count: src.indirect_count.size_in_bytes(),
            bin_headers: src.bin_headers.size_in_bytes(),
            paths: src.paths.size_in_bytes(),
            lines: src.lines.size_in_bytes(),
            bin_data: src.bin_data.size_in_bytes(),
            tiles: src.tiles.size_in_bytes(),
            seg_counts: src.seg_counts.size_in_bytes(),
            segments: src.segments.size_in_bytes(),
            ptcl: src.ptcl.size_in_bytes(),
        }
    }
Unixcoder Score: -0.03540775924921036
--------------------------------------------------
C_Code: 
int32_t SystemAbilityManagerStub::LoadRemoteSystemAbilityInner(MessageParcel& data, MessageParcel& reply)
{
    int32_t systemAbilityId = -1;
    bool ret = false;
    std::string deviceId = "";
    sptr<IRemoteObject> remoteObject = nullptr;
    sptr<ISystemAbilityLoadCallback> callback = nullptr;
    {
        SamgrXCollie samgrXCollie("samgrStub--loadRmtSa_readData");
        ret = data.ReadInt32(systemAbilityId);
        if (!ret) {
            HILOGW("LoadRemoteSystemAbilityInner read SAId invalid");
            return ERR_INVALID_VALUE;
        }
        int32_t checkRet = LoadRemoteSACheck(systemAbilityId);
        if (checkRet != ERR_OK) {
            return checkRet;
        }
        deviceId = data.ReadString();
        if (deviceId.empty()) {
            HILOGW("LoadRemoteSystemAbilityInner read deviceId failed");
            return ERR_INVALID_VALUE;
        }
        remoteObject = data.ReadRemoteObject();
        if (remoteObject == nullptr) {
            HILOGW("LoadRemoteSystemAbilityInner read callback failed!");
            return ERR_INVALID_VALUE;
        }
        callback = iface_cast<ISystemAbilityLoadCallback>(remoteObject);
        if (callback == nullptr) {
            HILOGW("LoadRemoteSystemAbilityInner iface_cast failed!");
            return ERR_INVALID_VALUE;
        }
    }

    int32_t result = LoadSystemAbility(systemAbilityId, deviceId, callback);
    HILOGD("LoadRemoteSystemAbilityInner result is %{public}d", result);
    {
        SamgrXCollie samgrXCollie("samgrStub--loadRmtSa_writeResult_" + ToString(systemAbilityId));
        ret = reply.WriteInt32(result);
    }
    if (!ret) {
        HILOGW("LoadRemoteSystemAbilityInner write reply failed.");
        return ERR_FLATTEN_OBJECT;
    }
    return result;
}
Function: 
pub fn load_system_ability(said: i32, timeout: i32) -> Option<RemoteObj> {
        debug!("load system ability {}", said);
        RemoteObj::from_sptr(LoadSystemAbility(said, timeout))
    }
Unixcoder Score: -0.03818175196647644
--------------------------------------------------
