C_Code: 
struct CertInfo
Function: 
struct CertInfo {
    cert: Option<Vec<Certificate>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "Partial", "source_c_file": "Partial__FreeCertData__idx555_rank5.c", "source_rust_file": "Partial__FreeCertData__idx555_rank5.rs", "c_fragment": "if (cert == nullptr) {\n        return;\n    }\n\n    if (cert->data != nullptr) {\n        free(cert->data);\n        cert->data = nullptr;\n    }\n    cert->size = 0;\n    free(cert);", "rust_fragment": "unsafe { FreeCertDataList(c_certs_ptr) };", "description": "Memory deallocation pattern: freeing allocated memory for certificate data and list.", "reasoning": "[Task Analysis] C function frees memory allocated for a cert struct and its data; Rust function retrieves cert data via FFI, processes it, and updates cert info. [Similarity] No full structural match due to different domains (memory cleanup vs data processing), but partial matching fragments exist in memory handling patterns. [Knowledge Extraction] Extract API mappings for memory deallocation and data processing patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__FreeCertData__idx555_rank5.c", "source_rust_file": "Partial__FreeCertData__idx555_rank5.rs", "c_api": "free(cert)", "rust_api": "unsafe { FreeCertDataList(c_certs_ptr) }", "mapping_type": "function", "description": "Memory deallocation for certificate struct", "reasoning": "[Task Analysis] C function frees memory allocated for a cert struct and its data; Rust function retrieves cert data via FFI, processes it, and updates cert info. [Similarity] No full structural match due to different domains (memory cleanup vs data processing), but partial matching fragments exist in memory handling patterns. [Knowledge Extraction] Extract API mappings for memory deallocation and data processing patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__FreeCertData__idx555_rank5.c", "source_rust_file": "Partial__FreeCertData__idx555_rank5.rs", "c_api": "free(cert->data)", "rust_api": "unsafe { FreeCertDataList(c_certs_ptr) }", "mapping_type": "function", "description": "Memory deallocation for certificate data", "reasoning": "[Task Analysis] C function frees memory allocated for a cert struct and its data; Rust function retrieves cert data via FFI, processes it, and updates cert info. [Similarity] No full structural match due to different domains (memory cleanup vs data processing), but partial matching fragments exist in memory handling patterns. [Knowledge Extraction] Extract API mappings for memory deallocation and data processing patterns."}]
Unixcoder Score: 0.058988306671381
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
struct CertInfo {
    cert: Option<Vec<Certificate>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__HandleNetCap__idx501_rank1.c", "source_rust_file": "API_Mapping__HandleNetCap__idx501_rank1.rs", "c_api": "networkNotifier_->notify_online(NetworkInfo{...})", "rust_api": "notify_online(&self, info: NetworkInfo)", "mapping_type": "function", "description": "Network online notification with state update", "reasoning": "[Task Analysis] C function handles network capability and notifies online status; Rust function handles network online notification with state tracking. [Similarity] Both involve network status updates and notifications, but C has complex conditional logic for different bearer types while Rust has a simpler state-based check. [Knowledge Extraction] No full structural match due to domain mismatch (C: network capability handling, Rust: state management), but API mappings found for notification logic."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__HandleNetCap__idx501_rank1.c", "source_rust_file": "API_Mapping__HandleNetCap__idx501_rank1.rs", "c_api": "networkNotifier_->notify_online(networkInfo)", "rust_api": "networkNotifier_->notify_online(networkInfo)", "mapping_type": "function", "description": "Network online notification", "reasoning": "[Task Analysis] C function handles network capability and notifies online status; Rust function handles network online notification with state tracking. [Similarity] Both involve network status updates and notifications, but C has complex conditional logic for different bearer types while Rust has a simpler state-based check. [Knowledge Extraction] No full structural match due to domain mismatch (C: network capability handling, Rust: state management), but API mappings found for notification logic."}]
Unixcoder Score: 0.058523084968328476
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
pub(crate) struct CertManager {
    info: Arc<RwLock<CertInfo>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "Partial", "source_c_file": "Partial__GetAppTaskQosInfos__idx482_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx482_rank2.rs", "c_fragment": "for (auto i = 0; i < rowCount; i++) {\n        if (queryRet->GoToRow(i) != OHOS::NativeRdb::E_OK) {\n            REQUEST_HILOGE(\"GetRunningTasksArray result set go to %{public}d row failed\", i);\n            return -1;\n        }\n        int taskId;\n        int action;\n        int mode;\n        int state;\n        int priority;\n        queryRet->GetInt(0, taskId);   // Line 0 is 'task_id'\n        queryRet->GetInt(1, action);   // Line 1 is 'action'\n        queryRet->GetInt(2, mode);     // Line 2 is 'mode'\n        queryRet->GetInt(3, state);    // Line 3 is 'state'\n        queryRet->GetInt(4, priority); // Line 4 is 'priority'\n        res.push_back(TaskQosInfo{ taskId, action, mode, state, priority });\n    }", "rust_fragment": "let ret =\n                unsafe { Pin::new_unchecked(&mut *self.inner).GetTaskQosInfo(&sql, &mut info) };\n            if ret == 0 {\n                Some(info)\n            } else {\n                None\n            }", "description": "Both perform database query operations and handle results, though C iterates over rows while Rust handles a single result.", "reasoning": "[Task Analysis] C function is a database query with row iteration and result population; Rust function is a single-task query returning an Option. [Similarity] Names don't match exactly but both perform database queries and return task info. [Knowledge Extraction] Full match blocked by domain mismatch (C: bulk query with loop, Rust: single query), but partial structural fragments and API mappings found."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx482_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx482_rank2.rs", "c_api": "res.push_back(TaskQosInfo{ taskId, action, mode, state, priority })", "rust_api": "Some(info)", "mapping_type": "function", "description": "Result population into output container", "reasoning": "[Task Analysis] C function is a database query with row iteration and result population; Rust function is a single-task query returning an Option. [Similarity] Names don't match exactly but both perform database queries and return task info. [Knowledge Extraction] Full match blocked by domain mismatch (C: bulk query with loop, Rust: single query), but partial structural fragments and API mappings found."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx482_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx482_rank2.rs", "c_api": "REQUEST_HILOGE(...)", "rust_api": "None", "mapping_type": "function", "description": "Error logging", "reasoning": "[Task Analysis] C function is a database query with row iteration and result population; Rust function is a single-task query returning an Option. [Similarity] Names don't match exactly but both perform database queries and return task info. [Knowledge Extraction] Full match blocked by domain mismatch (C: bulk query with loop, Rust: single query), but partial structural fragments and API mappings found."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx482_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx482_rank2.rs", "c_api": "queryRet->GetInt(0, taskId)", "rust_api": "GetTaskQosInfo(&sql, &mut info)", "mapping_type": "function", "description": "Database field retrieval from query result", "reasoning": "[Task Analysis] C function is a database query with row iteration and result population; Rust function is a single-task query returning an Option. [Similarity] Names don't match exactly but both perform database queries and return task info. [Knowledge Extraction] Full match blocked by domain mismatch (C: bulk query with loop, Rust: single query), but partial structural fragments and API mappings found."}]
Unixcoder Score: 0.05097547173500061
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
pub(crate) struct CertManager {
    info: Arc<RwLock<CertInfo>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_api": "queryRet->GetRowCount(rowCount)", "rust_api": "stmt.query_map", "mapping_type": "function", "description": "Query execution and row retrieval", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}, {"knowledge_type": "API_Mapping", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_api": "res.push_back(TaskQosInfo{ taskId, action, mode, state, priority })", "rust_api": "TaskQosInfo { task_id: row.get(0).unwrap(), action: row.get::<_, u8>(1).unwrap().into(), mode: row.get::<_, u8>(2).unwrap().into(), state: row.get(3).unwrap(), priority: row.get(4).unwrap(), }", "mapping_type": "function", "description": "Data structure creation and population", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}, {"knowledge_type": "Partial", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_fragment": "for (auto i = 0; i < rowCount; i++) {\n        if (queryRet->GoToRow(i) != OHOS::NativeRdb::E_OK) {\n            REQUEST_HILOGE(\"GetRunningTasksArray result set go to %{public}d row failed\", i);\n            return -1;\n        }\n        int taskId;\n        int action;\n        int mode;\n        int state;\n        int priority;\n        queryRet->GetInt(0, taskId);   // Line 0 is 'task_id'\n        queryRet->GetInt(1, action);   // Line 1 is 'action'\n        queryRet->GetInt(2, mode);     // Line 2 is 'mode'\n        queryRet->GetInt(3, state);    // Line 3 is 'state'\n        queryRet->GetInt(4, priority); // Line 4 is 'priority'\n        res.push_back(TaskQosInfo{ taskId, action, mode, state, priority });\n    }", "rust_fragment": "rows.into_iter().map(|info| info.unwrap()).collect()", "description": "Both functions iterate through query results and extract data into TaskQosInfo objects.", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}, {"knowledge_type": "Full", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction.", "description": "Full structural translation"}, {"knowledge_type": "API_Mapping", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_api": "queryRet->GoToRow(i)", "rust_api": "row.get(0)", "mapping_type": "function", "description": "Row navigation and data access", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}, {"knowledge_type": "API_Mapping", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_api": "queryRet->GetInt(0, taskId)", "rust_api": "row.get(0).unwrap()", "mapping_type": "function", "description": "Integer data extraction from row", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}, {"knowledge_type": "API_Mapping", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_api": "store_->QueryByStep(std::string(sql))", "rust_api": "self.inner.prepare(&sql).unwrap()", "mapping_type": "function", "description": "Database query preparation", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}, {"knowledge_type": "Partial", "source_c_file": "Full__GetAppTaskQosInfos__idx484_rank1.c", "source_rust_file": "Full__GetAppTaskQosInfos__idx484_rank1.rs", "c_fragment": "if (store_ == nullptr) {\n        return -1;\n    }\n    auto queryRet = store_->QueryByStep(std::string(sql));\n    int rowCount = 0;\n\n    if (queryRet == nullptr) {\n        REQUEST_HILOGE(\"GetRunningTasksArray result set is nullptr\");\n        return -1;\n    }", "rust_fragment": "let mut stmt = self.inner.prepare(&sql).unwrap();\n            let rows = stmt\n                .query_map([], |row| {\n                    Ok(TaskQosInfo {\n                        task_id: row.get(0).unwrap(),\n                        action: row.get::<_, u8>(1).unwrap().into(),\n                        mode: row.get::<_, u8>(2).unwrap().into(),\n                        state: row.get(3).unwrap(),\n                        priority: row.get(4).unwrap(),\n                    })\n                })\n                .unwrap();", "description": "Both functions handle database query setup and error checking before processing results.", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info, while Rust function is a wrapper that conditionally calls C or uses SQLite. [Similarity] Names don't match exactly but both perform database queries and return TaskQosInfo collections. [Knowledge Extraction] Full structural match in logic flow and data handling; API mappings found for query execution, row iteration, and data extraction."}]
Unixcoder Score: 0.043880678713321686
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
pub(crate) struct CertManager {
    info: Arc<RwLock<CertInfo>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "queryRet->GetInt(4, priority)", "rust_api": "task.priority", "mapping_type": "field_access", "description": "Accessing field from database result to populate struct field", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "queryRet->GetInt(0, taskId)", "rust_api": "task.task_id", "mapping_type": "field_access", "description": "Accessing field from database result to populate struct field", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "queryRet->GoToRow(i)", "rust_api": "self.inner.iter_mut().find(|app| app.uid == uid)", "mapping_type": "function", "description": "Navigating to a specific row in database vs finding a matching element in a collection", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "queryRet->GetInt(2, mode)", "rust_api": "task.mode", "mapping_type": "field_access", "description": "Accessing field from database result to populate struct field", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_fragment": "for (auto i = 0; i < rowCount; i++) {\n        if (queryRet->GoToRow(i) != OHOS::NativeRdb::E_OK) {\n            REQUEST_HILOGE(\"GetRunningTasksArray result set go to %{public}d row failed\", i);\n            return -1;\n        }\n        int taskId;\n        int action;\n        int mode;\n        int state;\n        int priority;\n        queryRet->GetInt(0, taskId);   // Line 0 is 'task_id'\n        queryRet->GetInt(1, action);   // Line 1 is 'action'\n        queryRet->GetInt(2, mode);     // Line 2 is 'mode'\n        queryRet->GetInt(3, state);    // Line 3 is 'state'\n        queryRet->GetInt(4, priority); // Line 4 is 'priority'\n        res.push_back(TaskQosInfo{ taskId, action, mode, state, priority });\n    }", "rust_fragment": "if let Some(app) = self.inner.iter_mut().find(|app| app.uid == uid) {\n            app.insert(task);\n            return;\n        }\n\n        let mut app = App::new(uid);\n        app.insert(task);\n        self.inner.push(app);", "description": "Both blocks iterate over data and insert into a collection, though the C version reads from a database result set while Rust version manages in-memory data structures.", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "queryRet->GetInt(1, action)", "rust_api": "task.action", "mapping_type": "field_access", "description": "Accessing field from database result to populate struct field", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "queryRet->GetInt(3, state)", "rust_api": "task.state", "mapping_type": "field_access", "description": "Accessing field from database result to populate struct field", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx608_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx608_rank1.rs", "c_api": "res.push_back(TaskQosInfo{ taskId, action, mode, state, priority })", "rust_api": "app.insert(task)", "mapping_type": "function", "description": "Adding data to a collection in both cases", "reasoning": "[Task Analysis] C function is a database query method that retrieves task QoS info and populates a vector; Rust function inserts a task into an app's collection. [Similarity] Names don't match conceptually (GetAppTaskQosInfos vs insert_task), and domains differ (database query vs in-memory task management). [Knowledge Extraction] No full structural match, but there's a partial matching block for the loop logic and data extraction pattern, and API mappings for database query operations and vector push operations."}]
Unixcoder Score: 0.036844003945589066
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
struct CertInfo {
    cert: Option<Vec<Certificate>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.c", "source_rust_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.rs", "c_api": "REQUEST_HILOGE(...)", "rust_api": "info!(...)", "mapping_type": "function", "description": "Logging error messages", "reasoning": "[Task Analysis] The C code is a method that queries a database and populates a vector with task QoS info, while the Rust code is a function that reschedules tasks based on QoS changes and interacts with a database. [Similarity] The domains are different: one is database query logic, the other is task scheduling and management. [Knowledge Extraction] No full structural match due to domain mismatch and different control flow. However, there are API mappings related to database access and task retrieval."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.c", "source_rust_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.rs", "c_api": "res.push_back(TaskQosInfo{ ... })", "rust_api": "new_queue.insert((uid, task_id), task)", "mapping_type": "function", "description": "Add task to collection", "reasoning": "[Task Analysis] The C code is a method that queries a database and populates a vector with task QoS info, while the Rust code is a function that reschedules tasks based on QoS changes and interacts with a database. [Similarity] The domains are different: one is database query logic, the other is task scheduling and management. [Knowledge Extraction] No full structural match due to domain mismatch and different control flow. However, there are API mappings related to database access and task retrieval."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.c", "source_rust_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.rs", "c_api": "queryRet->GetInt(0, taskId)", "rust_api": "task_id", "mapping_type": "field_access", "description": "Read integer field from query result", "reasoning": "[Task Analysis] The C code is a method that queries a database and populates a vector with task QoS info, while the Rust code is a function that reschedules tasks based on QoS changes and interacts with a database. [Similarity] The domains are different: one is database query logic, the other is task scheduling and management. [Knowledge Extraction] No full structural match due to domain mismatch and different control flow. However, there are API mappings related to database access and task retrieval."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.c", "source_rust_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.rs", "c_api": "queryRet->GetRowCount(rowCount)", "rust_api": "RequestDb::get_instance().get_task_qos_info(task_id)", "mapping_type": "function", "description": "Get row count and check for task QoS info", "reasoning": "[Task Analysis] The C code is a method that queries a database and populates a vector with task QoS info, while the Rust code is a function that reschedules tasks based on QoS changes and interacts with a database. [Similarity] The domains are different: one is database query logic, the other is task scheduling and management. [Knowledge Extraction] No full structural match due to domain mismatch and different control flow. However, there are API mappings related to database access and task retrieval."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.c", "source_rust_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.rs", "c_api": "store_->QueryByStep(std::string(sql))", "rust_api": "RequestDb::get_instance().get_task(...)", "mapping_type": "function", "description": "Database query and task retrieval", "reasoning": "[Task Analysis] The C code is a method that queries a database and populates a vector with task QoS info, while the Rust code is a function that reschedules tasks based on QoS changes and interacts with a database. [Similarity] The domains are different: one is database query logic, the other is task scheduling and management. [Knowledge Extraction] No full structural match due to domain mismatch and different control flow. However, there are API mappings related to database access and task retrieval."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.c", "source_rust_file": "API_Mapping__GetAppTaskQosInfos__idx646_rank2.rs", "c_api": "queryRet->GoToRow(i)", "rust_api": "RequestDb::get_instance().get_task(...)", "mapping_type": "function", "description": "Navigate to specific row and retrieve task", "reasoning": "[Task Analysis] The C code is a method that queries a database and populates a vector with task QoS info, while the Rust code is a function that reschedules tasks based on QoS changes and interacts with a database. [Similarity] The domains are different: one is database query logic, the other is task scheduling and management. [Knowledge Extraction] No full structural match due to domain mismatch and different control flow. However, there are API mappings related to database access and task retrieval."}]
Unixcoder Score: 0.03539653867483139
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
struct CertInfo {
    cert: Option<Vec<Certificate>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_api": "REQUEST_HILOGE", "rust_api": "info!(...)", "mapping_type": "function", "description": "Error logging mechanism", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_api": "queryRet->GoToRow(i)", "rust_api": "self.get_app_task_qos_infos_inner(&sql)", "mapping_type": "method", "description": "Move to specific row in query result", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_api": "res.push_back(TaskQosInfo{ taskId, action, mode, state, priority })", "rust_api": "self.get_app_task_qos_infos_inner(&sql)", "mapping_type": "method", "description": "Add retrieved data to result collection", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_fragment": "if (store_ == nullptr) {\n        return -1;\n    }", "rust_fragment": "self.get_app_task_qos_infos_inner(&sql)", "description": "Both check for null/valid state before proceeding with operation", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_api": "queryRet->GetInt(0, taskId)", "rust_api": "self.get_app_task_qos_infos_inner(&sql)", "mapping_type": "method", "description": "Read integer value from query result at column index", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_fragment": "if (queryRet == nullptr) {\n        REQUEST_HILOGE(\"GetRunningTasksArray result set is nullptr\");\n        return -1;\n    }", "rust_fragment": "self.get_app_task_qos_infos_inner(&sql)", "description": "Both handle null result set case with error logging and early return", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_api": "queryRet->GetRowCount(rowCount)", "rust_api": "self.get_app_task_qos_infos_inner(&sql)", "mapping_type": "method", "description": "Get row count from query result", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx485_rank1.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx485_rank1.rs", "c_api": "store_->QueryByStep(std::string(sql))", "rust_api": "self.get_app_task_qos_infos_inner(&sql)", "mapping_type": "function", "description": "Database query execution", "reasoning": "[Task Analysis] C function is a database query with error handling and row iteration; Rust function builds SQL and delegates to inner function. [Similarity] Names don't match exactly but both perform database query logic. [Knowledge Extraction] No full structural match due to different control flow and logic. Partial match in error handling and data retrieval patterns. API mappings found for SQL construction and data access patterns."}]
Unixcoder Score: 0.03418352082371712
--------------------------------------------------
C_Code: 
struct CertInfo
Function: 
pub(crate) struct CertManager {
    info: Arc<RwLock<CertInfo>>,
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "queryRet->GetInt(1, action)", "rust_api": "row.get::<_, u8>(1).unwrap().into()", "mapping_type": "method", "description": "Reading integer field from query result", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "queryRet->GetInt(4, priority)", "rust_api": "row.get(3).unwrap()", "mapping_type": "method", "description": "Reading integer field from query result", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "store_->QueryByStep(std::string(sql))", "rust_api": "self.inner.prepare(&sql).unwrap()", "mapping_type": "function", "description": "Database query preparation", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_fragment": "for (auto i = 0; i < rowCount; i++) {\n        if (queryRet->GoToRow(i) != OHOS::NativeRdb::E_OK) {\n            REQUEST_HILOGE(\"GetRunningTasksArray result set go to %{public}d row failed\", i);\n            return -1;\n        }\n        int taskId;\n        int action;\n        int mode;\n        int state;\n        int priority;\n        queryRet->GetInt(0, taskId);   // Line 0 is 'task_id'\n        queryRet->GetInt(1, action);   // Line 1 is 'action'\n        queryRet->GetInt(2, mode);     // Line 2 is 'mode'\n        queryRet->GetInt(3, state);    // Line 3 is 'state'\n        queryRet->GetInt(4, priority); // Line 4 is 'priority'\n        res.push_back(TaskQosInfo{ taskId, action, mode, state, priority });\n    }", "rust_fragment": "let mut rows = stmt\n            .query_map([], |row| {\n                Ok(TaskQosInfo {\n                    task_id: task_id,\n                    action: row.get::<_, u8>(0).unwrap().into(),\n                    mode: row.get::<_, u8>(1).unwrap().into(),\n                    state: row.get(2).unwrap(),\n                    priority: row.get(3).unwrap(),\n                })\n            })\n            .unwrap();\n        rows.next().map(|info| info.unwrap())", "description": "Both iterate over query results and extract fields to construct TaskQosInfo objects.", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "queryRet->GetInt(3, state)", "rust_api": "row.get(2).unwrap()", "mapping_type": "method", "description": "Reading integer field from query result", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "queryRet->GetInt(2, mode)", "rust_api": "row.get::<_, u8>(1).unwrap().into()", "mapping_type": "method", "description": "Reading integer field from query result", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "queryRet->GetRowCount(rowCount)", "rust_api": "stmt.query_map", "mapping_type": "function", "description": "Query execution and result mapping", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "queryRet->GetInt(0, taskId)", "rust_api": "row.get::<_, u8>(0).unwrap().into()", "mapping_type": "method", "description": "Reading integer field from query result", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetAppTaskQosInfos__idx483_rank2.c", "source_rust_file": "Partial__GetAppTaskQosInfos__idx483_rank2.rs", "c_api": "res.push_back(TaskQosInfo{ taskId, action, mode, state, priority })", "rust_api": "Ok(TaskQosInfo { ... })", "mapping_type": "function", "description": "Adding constructed struct to result vector", "reasoning": "[Task Analysis] C function queries database and parses results into a vector; Rust function prepares and executes a SQL query, maps results to a struct. [Similarity] Names don't match exactly but both perform database query and result mapping. [Knowledge Extraction] Found partial structural match in loop and data extraction logic, and API mappings for database query and result handling."}]
Unixcoder Score: 0.030732696875929832
--------------------------------------------------
C_Code: 
void FreeCertDataList(struct CRequestCerts *certs)
{
    RequestCertManager::GetInstance().FreeCertDataList(certs);
}
Function: 
fn update_system_cert(info: &Arc<RwLock<CertInfo>>) {
    let mut info = info.write().unwrap();

    let mut certificates = Vec::new();

    let c_certs_ptr = unsafe { GetUserCertsData() };
    if !c_certs_ptr.is_null() {
        info!("GetUserCertsData valid");
        let certs = unsafe { &*c_certs_ptr };
        let c_cert_list_ptr =
            unsafe { std::slice::from_raw_parts(certs.cert_data_list, certs.len as usize) };
        for item in c_cert_list_ptr.iter() {
            let cert = unsafe { &**item };
            let cert_slice = unsafe { std::slice::from_raw_parts(cert.data, cert.size as usize) };
            match Certificate::from_pem(cert_slice) {
                Ok(cert) => {
                    certificates.push(cert);
                }
                Err(e) => {
                    error!("parse security cert path failed, error is {:?}", e);
                    return;
                }
            };
        }
        unsafe { FreeCertDataList(c_certs_ptr) };
    }

    match Certificate::from_path("/system/etc/security/certificates/") {
        Ok(cert) => {
            certificates.push(cert);
        }
        Err(e) => {
            error!("parse security cert path failed, error is {:?}", e);
            return;
        }
    };

    *info = CertInfo {
        cert: Some(certificates),
    };
}
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_api": "queryRet->GetLong(0, action)", "rust_api": "let mut info = TaskQosInfo { ... };", "mapping_type": "function", "description": "Read long value from column in result set", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_fragment": "if (queryRet == nullptr) {\n        REQUEST_HILOGE(\"GetTaskQosInfo result set is nullptr\");\n        return -1;\n    }", "rust_fragment": "if ret == 0 {\n                Some(info)\n            } else {\n                None\n            }", "description": "Both handle null result set case and return error code.", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_fragment": "int64_t action;\n    int64_t mode;\n    int64_t state;\n    int64_t priority;\n    queryRet->GetLong(0, action);   // Line 0 is 'action'\n    queryRet->GetLong(1, mode);     // Line 1 is 'mode'\n    queryRet->GetLong(2, state);    // Line 2 is 'state'\n    queryRet->GetLong(3, priority); // Line 3 is 'priority'\n    res.action = static_cast<uint8_t>(action);\n    res.mode = static_cast<uint8_t>(mode);\n    res.state = static_cast<uint8_t>(state);\n    res.priority = static_cast<uint32_t>(priority);", "rust_fragment": "let mut info = TaskQosInfo {\n                task_id,\n                action: 0,\n                mode: 0,\n                state: 0,\n                priority: 0,\n            };", "description": "Both extract and assign values from database query results to a struct.", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_api": "queryRet->GetRowCount(rowCount)", "rust_api": "ret == 0", "mapping_type": "function", "description": "Check number of rows returned from query", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_api": "store_->QueryByStep(std::string(sql))", "rust_api": "unsafe { Pin::new_unchecked(&mut *self.inner).GetTaskQosInfo(&sql, &mut info) }", "mapping_type": "function", "description": "Database query execution", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "Partial", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_fragment": "if (store_ == nullptr) {\n        return -1;\n    }", "rust_fragment": "if ret == 0 {\n                Some(info)\n            } else {\n                None\n            }", "description": "Both check for invalid state and return early on failure.", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_api": "queryRet->GoToRow(0)", "rust_api": "let sql = format!(...);", "mapping_type": "function", "description": "Navigate to first row in result set", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}, {"knowledge_type": "API_Mapping", "source_c_file": "Partial__GetTaskQosInfo__idx482_rank1.c", "source_rust_file": "Partial__GetTaskQosInfo__idx482_rank1.rs", "c_api": "REQUEST_HILOGE(...)", "rust_api": "None", "mapping_type": "function", "description": "Logging error message", "reasoning": "[Task Analysis] C function `RequestDataBase::GetTaskQosInfo` and Rust function `get_task_qos_info` both retrieve task QoS information from a database. [Similarity] Names don't match exactly but refer to the same concept (retrieving task QoS data). The logic is semantically aligned: both query a database, check for null results, extract fields, and return success/failure. [Knowledge Extraction] Full structural match is blocked by length difference (C has ~30 lines, Rust ~15 lines) and implementation vs usage asymmetry (C is a method, Rust is a public method calling a C++ method). However, partial fragments and API mappings can be extracted."}]
Unixcoder Score: -0.005379302427172661
--------------------------------------------------
C_Code: 
std::pair<int32_t, SchemaMeta> CloudServiceImpl::GetSchemaFromHap(const HapInfo &hapInfo)
{
    SchemaMeta schemaMeta;
    AppInfo info{ .bundleName = hapInfo.bundleName, .userId = hapInfo.user, .appIndex = hapInfo.instIndex };
    auto schemas = GetSchemaHelper::GetInstance().GetSchemaFromHap(CLOUD_SCHEMA, info);
    for (auto &schema : schemas) {
        if (schemaMeta.Unmarshall(schema)) {
            return { SUCCESS, schemaMeta };
        }
    }
    ZLOGD("get schema from hap failed, bundleName:%{public}s", hapInfo.bundleName.c_str());
    return { ERROR, schemaMeta };
}
Function: 
fn try_from(value: u8) -> Result<Self, Self::Error> {
        let typ = match value {
            0 => FieldType::Null,
            1 => FieldType::Number,
            2 => FieldType::Real,
            3 => FieldType::Text,
            4 => FieldType::Bool,
            5 => FieldType::Blob,
            6 => FieldType::Asset,
            7 => FieldType::Assets,
            _ => return Err(Error::InvalidFieldType),
        };
        Ok(typ)
    }
Extracted_Knowledge: 
[{"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "res.priority = static_cast<uint32_t>(priority)", "rust_api": "task.priority", "mapping_type": "field_access", "description": "Type conversion and assignment of data to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "res.mode = static_cast<uint8_t>(mode)", "rust_api": "task.mode", "mapping_type": "field_access", "description": "Type conversion and assignment of data to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "app.insert(task)", "rust_api": "app.insert(task)", "mapping_type": "method", "description": "Inserting a task into an application's task list", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "queryRet->GetLong(3, priority)", "rust_api": "task.priority", "mapping_type": "field_access", "description": "Accessing data from query result and assigning to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "queryRet->GetLong(1, mode)", "rust_api": "task.mode", "mapping_type": "field_access", "description": "Accessing data from query result and assigning to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "queryRet->GetLong(0, action)", "rust_api": "task.task_id", "mapping_type": "field_access", "description": "Accessing data from query result and assigning to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "self.inner.push(app)", "rust_api": "self.inner.push(app)", "mapping_type": "method", "description": "Adding an element to a collection", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "queryRet->GetLong(2, state)", "rust_api": "task.state", "mapping_type": "field_access", "description": "Accessing data from query result and assigning to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "res.state = static_cast<uint8_t>(state)", "rust_api": "task.state", "mapping_type": "field_access", "description": "Type conversion and assignment of data to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}, {"knowledge_type": "API_Mapping", "source_c_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.c", "source_rust_file": "API_Mapping__GetTaskQosInfo__idx608_rank3.rs", "c_api": "res.action = static_cast<uint8_t>(action)", "rust_api": "task.action", "mapping_type": "field_access", "description": "Type conversion and assignment of data to struct field", "reasoning": "[Task Analysis] C function handles database query and result parsing; Rust function inserts a task into a collection. [Similarity] No structural similarity in control flow or data handling patterns. [Knowledge Extraction] No full match, no partial match, but there are API mappings related to data insertion and collection management."}]
Unixcoder Score: -0.010298102162778378
--------------------------------------------------
